document.addEventListener("DOMContentLoaded",t=>{let e=document.getElementById("creditSimulation"),r=document.querySelector(".installment-table"),n=r.querySelector("tbody"),l=r.querySelector("tfoot"),o=new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}),d=()=>{document.querySelector(".result-container").style.display="none",document.querySelectorAll(".result-container p span").forEach(t=>{t.innerHTML="&nbsp;"}),n.innerHTML="",l.querySelector("th:not(:first-child)").innerHTML="&nbsp;"},i=(t,e,r)=>{let d=(1+e)**r,i=t*e*(d/(d-1));document.getElementById("textInstallment").innerHTML=o.format(i);let a,c,m,u="",y=0,f=0,s=t;for(a=0;a<r;a++)f+=m=e*s,y+=c=i-m,s-=c,s=s<=0?0:s,u+=`<tr><th scope="row">${a+1}</th>`,u+=`<td>${o.format(c)}</td>`,u+=`<td>${o.format(m)}</td>`,u+=`<td>${o.format(i)}</td>`,u+=`<td>${o.format(s)}</td></tr>`;n.innerHTML+=u,l.querySelector(":nth-child(2)").innerHTML=o.format(y),l.querySelector(":nth-child(3)").innerHTML=o.format(f),l.querySelector(":nth-child(4)").innerHTML=o.format(i*r)},a=(t,e,r)=>{let d=t/r,i=t*e,a=d+i;document.getElementById("textInstallment").innerHTML=o.format(a);let c,m="",u=0,y=0,f=t;for(c=0;c<r;c++)f-=d,f=f<=0?0:f,u+=d,y+=i,m+=`<tr><th scope="row">${c+1}</th>`,m+=`<td>${o.format(d)}</td>`,m+=`<td>${o.format(i)}</td>`,m+=`<td>${o.format(a)}</td>`,m+=`<td>${o.format(f)}</td></tr>`;n.innerHTML+=m,l.querySelector(":nth-child(2)").innerHTML=o.format(u),l.querySelector(":nth-child(3)").innerHTML=o.format(y),l.querySelector(":nth-child(4)").innerHTML=o.format(a*r)},c=(t,e,r)=>{let d=t/r;document.getElementById("textInstallment").innerHTML="Lihat tabel";let i,a,c,m="",u=0,y=0,f=0,s=t;for(i=0;i<r;i++)f+=c=(a=(t-i*d)*e)+d,s-=d,s=s<=0?0:s,u+=d,y+=a,m+=`<tr><th scope="row">${i+1}</th>`,m+=`<td>${o.format(d)}</td>`,m+=`<td>${o.format(a)}</td>`,m+=`<td>${o.format(c)}</td>`,m+=`<td>${o.format(s)}</td></tr>`;n.innerHTML+=m,l.querySelector(":nth-child(2)").innerHTML=o.format(u),l.querySelector(":nth-child(3)").innerHTML=o.format(y),l.querySelector(":nth-child(4)").innerHTML=o.format(f)};e.querySelector("#csCount").addEventListener("click",t=>{d();let e=Number(document.getElementById("csAmount").value),r=Number(document.getElementById("csInterest").value)/12/100,l=Number(document.getElementById("csPeriod").value),m=document.getElementById("csType").value;document.getElementById("textPeriod").innerHTML=`${l} bulan`,document.getElementById("textAmount").innerHTML=o.format(e);let u='<tr><th scope="row">0</th><td>0</td><td>0</td>';if(u+=`<td>0</td><td>${o.format(e)}</td></tr>`,n.innerHTML=u,"annuity"===m)i(e,r,l);else if("flat"===m)a(e,r,l);else{if("effective"!==m)return;c(e,r,l)}document.querySelector(".result-container").style.display=""}),e.addEventListener("reset",t=>{d()}),e.querySelector('[type="text"]').addEventListener("input",function(t){this.value=this.value.replace(/[^0-9.,]/,"")})});
